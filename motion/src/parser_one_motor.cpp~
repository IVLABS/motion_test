#include "ros/ros.h"
#include "std_msgs/Int64.h"
#include <math.h>
float motor[300]={
0,
0.10101,
0.20202,
0.30303,
0.40404,
0.50505,
0.60606,
0.70707,
0.80808,
0.90909,
1.0101,
1.1111,
1.2121,
1.3131,
1.4141,
1.5152,
1.6162,
1.7172,
1.8182,
1.9192,
2.0202,
2.1212,
2.2222,
2.3232,
2.4242,
2.5253,
2.6263,
2.7273,
2.8283,
2.9293,
3.0303,
3.1313,
3.2323,
3.3333,
3.4343,
3.5354,
3.6364,
3.7374,
3.8384,
3.9394,
4.0404,
4.1414,
4.2424,
4.3434,
4.4444,
4.5455,
4.6465,
4.7475,
4.8485,
4.9495,
5.0505,
5.1515,
5.2525,
5.3535,
5.4545,
5.5556,
5.6566,
5.7576,
5.8586,
5.9596,
6.0606,
6.1616,
6.2626,
6.3636,
6.4646,
6.5657,
6.6667,
6.7677,
6.8687,
6.9697,
7.0707,
7.1717,
7.2727,
7.3737,
7.4747,
7.5758,
7.6768,
7.7778,
7.8788,
7.9798,
8.0808,
8.1818,
8.2828,
8.3838,
8.4848,
8.5859,
8.6869,
8.7879,
8.8889,
8.9899,
9.0909,
9.1919,
9.2929,
9.3939,
9.4949,
9.596,
9.697,
9.798,
9.899,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10,
10.101,
10.202,
10.303,
10.404,
10.505,
10.606,
10.707,
10.808,
10.909,
11.01,
11.111,
11.212,
11.313,
11.414,
11.515,
11.616,
11.717,
11.818,
11.919,
12.02,
12.121,
12.222,
12.323,
12.424,
12.525,
12.626,
12.727,
12.828,
12.929,
13.03,
13.131,
13.232,
13.333,
13.434,
13.535,
13.636,
13.737,
13.838,
13.939,
14.04,
14.141,
14.242,
14.343,
14.444,
14.545,
14.646,
14.747,
14.848,
14.949,
15.051,
15.152,
15.253,
15.354,
15.455,
15.556,
15.657,
15.758,
15.859,
15.96,
16.061,
16.162,
16.263,
16.364,
16.465,
16.566,
16.667,
16.768,
16.869,
16.97,
17.071,
17.172,
17.273,
17.374,
17.475,
17.576,
17.677,
17.778,
17.879,
17.98,
18.081,
18.182,
18.283,
18.384,
18.485,
18.586,
18.687,
18.788,
18.889,
18.99,
19.091,
19.192,
19.293,
19.394,
19.495,
19.596,
19.697,
19.798,
19.899,
20
  

};
int i=0;
int main(int argc, char **argv)
{
  ros::init(argc, argv, "angle_parser"); //name_of_node: angle_parser
  ros::NodeHandle n;
  ros::Publisher pub_ang = n.advertise<std_msgs::Int64>("parse_to_motor", 10); //msgs angle_to_motor[i] is published on topic angle_to_motor; quesize: 10
  
  ros::Rate loop_rate(100);

  while (ros::ok())
  {
    std_msgs::Int64 ang_msg;
    ang_msg.data = round(21+((motor[i]+150)/300)*981);
    i++;
    
    pub_ang.publish(ang_msg);
    
    ROS_INFO("%d",ang_msg.data);
    ros::spinOnce();
    loop_rate.sleep();
    if (i==300)
     ros::shutdown();
   
  }
  return 0;
}
